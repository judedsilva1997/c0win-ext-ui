(this["webpackJsonpcowin-ext-ui"]=this["webpackJsonpcowin-ext-ui"]||[]).push([[0],{165:function(e,t,n){},166:function(e,t,n){},185:function(e,t,n){},190:function(e,t,n){},196:function(e,t){},198:function(e,t){},208:function(e,t){},210:function(e,t){},237:function(e,t){},239:function(e,t){},240:function(e,t){},245:function(e,t){},247:function(e,t){},266:function(e,t){},278:function(e,t){},281:function(e,t){},308:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),r=n(27),s=n.n(r),i=(n(165),n(98)),o=n(9),u=(n(166),n(11)),l=n.n(u),d=n(14),j=n(21),b=n.n(j),h="https://cdn-api.co-vin.in/api",p={STATE_URL:"".concat(h,"/v2/admin/location/states"),DISTRICT_URL:"".concat(h,"/v2/admin/location/districts"),BENE_URL:"".concat(h,"/v2/appointment/beneficiaries"),BY_PIN:"".concat(h,"/v2/appointment/sessions/calendarByPin"),BY_DISTRICT:"".concat(h,"/v2/appointment/sessions/calendarByDistrict"),SCHEDULE:"".concat(h,"/v2/appointment/schedule"),CAPTCHA:"".concat(h,"/v2/auth/getRecaptcha"),GENERATE_OTP:"".concat(h,"/v2/auth/generateMobileOTP"),LOGIN:"".concat(h,"/v2/auth/validateMobileOtp")},O=(n(185),n(319)),f=n(65),x=a.a.createContext(),v=n(1);function m(e){var t=e.nextStep,n=Object(c.useState)([]),a=Object(o.a)(n,2),r=a[0],s=a[1],i=Object(c.useContext)(x),u=i.auth;i.selectedBeneficiaries;return Object(c.useEffect)(Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get(p.BENE_URL,{headers:{Authorization:"Bearer ".concat(u.authToken)}});case 3:(t=e.sent)&&t.data&&s(t.data.beneficiaries),e.next=12;break;case 7:if(e.prev=7,e.t0=e.catch(0),!e.t0||!e.t0.response||401!==e.t0.response.status){e.next=12;break}return u.setAuthToken(null),e.abrupt("return");case 12:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]),Object(v.jsxs)("div",{className:"beneficiaries",children:[Object(v.jsx)("h5",{children:"Select the Beneficiaries you want to book for : "}),r.length>0?Object(v.jsxs)(v.Fragment,{children:[r.map((function(e){return Object(v.jsx)("div",{className:"beneficiary",children:Object(v.jsx)(O.a.Check,{type:"checkbox",selected:e.selected,onClick:function(){e.selected=!0},label:e.name})})})),Object(v.jsx)(f.a,{variant:"primary",onClick:function(){var e=r.filter((function(e){return e.selected}));t(e)},type:"submit",children:"Schedule for selected beneficiaries"})]}):Object(v.jsx)("div",{className:"error-msg",children:"No Beneficiaries To Display"})]})}var g=n(318),k=n(159),y=n(97),w=n(313),C=n(314),S=n(158),B=n(315),T=n(316),_=n(317);n(190);function I(e){var t=""+(e.getMonth()+1),n=""+e.getDate(),c=e.getFullYear();return t.length<2&&(t="0"+t),n.length<2&&(n="0"+n),[n,t,c].join("-")}function E(e){var t=e.setCaptcha,n=Object(c.useState)(),a=Object(o.a)(n,2),r=a[0],s=a[1],i=Object(c.useContext)(x),u=i.auth;i.selectedBeneficiaries;return Object(c.useEffect)(Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.post(p.CAPTCHA,{},{headers:{Authorization:"Bearer ".concat(u.authToken)}});case 3:(t=e.sent).data&&t.data.captcha&&s(t.data.captcha),e.next=12;break;case 7:if(e.prev=7,e.t0=e.catch(0),!e.t0||!e.t0.response||401!==e.t0.response.status){e.next=12;break}return u.setAuthToken(null),e.abrupt("return");case 12:case"end":return e.stop()}}),e,null,[[0,7]])}))),[]),Object(v.jsxs)("div",{className:"captcha",children:[Object(v.jsx)("div",{className:"image",dangerouslySetInnerHTML:{__html:r}}),Object(v.jsxs)(O.a.Group,{controlId:"formBasicEmail",children:[Object(v.jsx)(O.a.Label,{children:"Enter the above captcha"}),Object(v.jsx)(O.a.Control,{type:"email",placeholder:"",onChange:function(e){t(e.target.value)}})]})]})}function A(){var e=Object(c.useState)(0),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(v.jsxs)("div",{className:"location-selector",children:[Object(v.jsx)("h5",{children:"Select the location:"}),Object(v.jsx)("span",{children:"Location By : "}),Object(v.jsxs)(w.a,{toggle:!0,children:[Object(v.jsx)(C.a,{type:"radio",variant:"secondary",name:"Location By District",value:0,checked:0===n,onClick:function(e){return a(0)},children:"By Pin Code"}),Object(v.jsx)(C.a,{type:"radio",variant:"secondary",name:"Location by Pin Code",value:1,checked:1===n,onClick:function(e){return a(1)},children:"By District"})]}),n?Object(v.jsx)(z,{}):Object(v.jsx)(R,{})]})}function N(e){var t=[],n=[];return e.forEach((function(e){var c=1,a=e.vaccine;e.dose1_date&&!e.dose2_date&&(c=2),parseInt((new Date).getFullYear())-parseInt(e.birth_year)>=45?n.push({id:e.beneficiary_reference_id,dose:c,vaccine:a,name:e.name}):parseInt((new Date).getFullYear())-parseInt(e.birth_year)>=18&&t.push({id:e.beneficiary_reference_id,dose:c,vaccine:a,name:e.name})})),[t,n]}function F(e,t,n,c,a){return L.apply(this,arguments)}function L(){return(L=Object(d.a)(l.a.mark((function e(t,n,c,a,r){var s,i,u,j,b;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=N(n),i=Object(o.a)(s,2),u=i[0],j=i[1],b=setInterval((function(){c(u,j).then(function(){var e=Object(d.a)(l.a.mark((function e(n){var c,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=Object(k.a)(n);try{for(i=function(){var e=s.value;e.sessions.forEach((function(n){18===n.min_age_limit&&u.length>0&&u.forEach(function(){var c=Object(d.a)(l.a.mark((function c(s){var i;return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!s.booked){c.next=2;break}return c.abrupt("return");case 2:if(!s.vaccine||s.vaccine.toUpperCase()===n.vaccine.toUpperCase()){c.next=4;break}return c.abrupt("return");case 4:return c.next=6,P(t,s,n,e,r);case 6:200===(i=c.sent)?(console.log("Booked for ".concat(s)),s.booked=!0,s.center=e.name,s.slot="".concat(n.date," ").concat(n.slots[0]),a(s)):401===i&&(clearInterval(b),t.setAuthToken(null));case 8:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}()),45===n.min_age_limit&&j.length>0&&j.forEach(function(){var c=Object(d.a)(l.a.mark((function c(s){var i;return l.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(!s.booked){c.next=2;break}return c.abrupt("return");case 2:if(!s.vaccine||s.vaccine.toUpperCase()===n.vaccine.toUpperCase()){c.next=4;break}return c.abrupt("return");case 4:return c.next=6,P(t,s,n,e,r);case 6:200===(i=c.sent)?(console.log("Booked for ".concat(s)),s.booked=!0,s.center=e.name,s.slot="".concat(n.date," ").concat(n.slots[0]),a(s)):401===i&&(clearInterval(b),t.setAuthToken(null));case 8:case"end":return c.stop()}}),c)})));return function(e){return c.apply(this,arguments)}}())}))},c.s();!(s=c.n()).done;)i()}catch(o){c.e(o)}finally{c.f()}u=u.filter((function(e){return!e.booked})),j=j.filter((function(e){return!e.booked})),0===u.length&&0===j.length&&clearInterval(b);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){e&&e.response&&401===e.response.status&&(clearInterval(b),t.setAuthToken(null))}))}),1e4);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function P(e,t,n,c,a){return D.apply(this,arguments)}function D(){return(D=Object(d.a)(l.a.mark((function e(t,n,c,a,r){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={center_id:String(a.center_id),session_id:c.session_id,beneficiaries:[n.id],slot:c.slots[0],dose:n.dose,captcha:r},e.prev=1,e.next=4,b.a.post("".concat(p.SCHEDULE),s,{headers:{Authorization:"Bearer ".concat(t.authToken)}});case 4:if(200!==e.sent.status){e.next=7;break}return e.abrupt("return",200);case 7:e.next=13;break;case 9:if(e.prev=9,e.t0=e.catch(1),!e.t0||!e.t0.response||401!==e.t0.response.status){e.next=13;break}return e.abrupt("return",401);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function R(){var e=Object(c.useState)(""),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(!1),s=Object(o.a)(r,2),i=s[0],u=s[1],j=Object(c.useState)([]),h=Object(o.a)(j,2),m=h[0],g=h[1],k=Object(c.useRef)([]),w=Object(c.useState)(),C=Object(o.a)(w,2),_=C[0],A=C[1],N=Object(c.useContext)(x),L=N.auth,P=N.selectedBeneficiaries,D=Object(c.useState)("Booking..."),R=Object(o.a)(D,2),z=R[0],U=R[1];function G(e){k.current=[].concat(Object(y.a)(k.current),[e]),g(k.current)}var Y=Object(c.useCallback)(function(){var e=Object(d.a)(l.a.mark((function e(t,c){var a,r,s,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U("Checking for slots"),a=new Date,r=I(a),e.prev=3,e.next=6,b.a.get("".concat(p.BY_PIN,"?pincode=").concat(n,"&date=").concat(r),{headers:{Authorization:"Bearer ".concat(L.authToken)}});case 6:return s=e.sent,i=s.data,(o=H(i,t,c)).length?U("Found probable slots"):U("No vacant slots"),e.abrupt("return",o);case 13:if(e.prev=13,e.t0=e.catch(3),U("Some error response"),!e.t0||!e.t0.response||401!==e.t0.response.status){e.next=18;break}throw e.t0;case 18:return e.abrupt("return",[]);case 19:case"end":return e.stop()}}),e,null,[[3,13]])})));return function(t,n){return e.apply(this,arguments)}}());return Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"loc",children:[Object(v.jsx)(O.a.Row,{children:Object(v.jsx)(S.a,{children:Object(v.jsx)(O.a.Control,{type:"number",onChange:function(e){a(e.target.value)},value:n,placeholder:"Enter Pin Code"})})}),Object(v.jsx)(E,{setCaptcha:A}),Object(v.jsx)(f.a,{variant:"primary",disabled:i||!n,onClick:function(){u(!0),F(L,P.selectedBeneficiaries,Y,G,_)},type:"submit",children:i?m.length===P.selectedBeneficiaries.length?"Booked":Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(B.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),z]}):"Book Slots"})]}),m.length>0&&Object(v.jsx)("div",{className:"booked-beneficiaries",children:Object(v.jsxs)(T.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"#"}),Object(v.jsx)("th",{children:"Beneficiary Name"}),Object(v.jsx)("th",{children:"Hospital"}),Object(v.jsx)("th",{children:"Session"})]})}),Object(v.jsx)("tbody",{children:m.map((function(e,t){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:t+1}),Object(v.jsx)("td",{children:e.name}),Object(v.jsx)("td",{children:e.center}),Object(v.jsx)("td",{children:e.slot})]})}))})]})})]})}function H(e,t,n){return e&&e.centers?e.centers.filter((function(e){var c=(e.sessions||[]).filter((function(e){if(e.available_capacity>0)return t.length&&18===e.min_age_limit||n.length&&45===e.min_age_limit}));return e.sessions=c,c.length>0})):[]}function z(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)([]),s=Object(o.a)(r,2),i=s[0],u=s[1],j=Object(c.useState)([]),h=Object(o.a)(j,2),m=h[0],g=h[1],k=Object(c.useState)(null),w=Object(o.a)(k,2),C=w[0],S=w[1],A=Object(c.useState)(!1),N=Object(o.a)(A,2),L=N[0],P=N[1],D=Object(c.useState)([]),R=Object(o.a)(D,2),z=R[0],U=R[1],G=Object(c.useState)(""),Y=Object(o.a)(G,2),M=Y[0],V=Y[1],W=Object(c.useState)(""),q=Object(o.a)(W,2),J=q[0],X=q[1],K=Object(c.useContext)(x),Q=K.auth,Z=K.selectedBeneficiaries,$=Object(c.useState)("Booking..."),ee=Object(o.a)($,2),te=ee[0],ne=ee[1],ce=Object(c.useRef)([]);function ae(e){ce.current=[].concat(Object(y.a)(ce.current),[e]),U(ce.current)}var re=Object(c.useCallback)(function(){var e=Object(d.a)(l.a.mark((function e(t,n){var c,a,r,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ne("Checking for slots"),c=new Date,a=I(c),e.prev=3,e.next=6,b.a.get("".concat(p.BY_DISTRICT,"?district_id=").concat(C.district_id,"&date=").concat(a),{headers:{Authorization:"Bearer ".concat(Q.authToken)}});case 6:return r=e.sent,s=r.data,i=H(s,t,n),M&&""!=M&&(i=i.filter((function(e){return M.includes(e.pincode)}))),i.length?ne("Found probable slots"):ne("No vacant slots"),e.abrupt("return",i);case 14:if(e.prev=14,e.t0=e.catch(3),ne("Some error response"),!e.t0||!e.t0.response||401!==e.t0.response.status){e.next=19;break}throw e.t0;case 19:return e.abrupt("return",[]);case 20:case"end":return e.stop()}}),e,null,[[3,14]])})));return function(t,n){return e.apply(this,arguments)}}());function se(){return(se=Object(d.a)(l.a.mark((function e(t){var n,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g([]),e.prev=1,e.next=4,b.a.get("".concat(p.DISTRICT_URL,"/").concat(t),{headers:{Authorization:"Bearer ".concat(Q.authToken)}});case 4:n=e.sent,(c=n.data)&&c.districts&&g(c.districts),e.next=14;break;case 9:if(e.prev=9,e.t0=e.catch(1),!e.t0||!e.t0.response||401!==e.t0.response.status){e.next=14;break}return Q.setAuthToken(null),e.abrupt("return");case 14:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}return Object(c.useEffect)(Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.a.get(p.STATE_URL,{headers:{Authorization:"Bearer ".concat(Q.authToken)}});case 3:t=e.sent,(n=t.data)&&n.states&&u(n.states),e.next=14;break;case 8:if(e.prev=8,e.t0=e.catch(0),console.log(e.t0),!e.t0||!e.t0.response||401!==e.t0.response.status){e.next=14;break}return Q.setAuthToken(null),e.abrupt("return");case 14:case"end":return e.stop()}}),e,null,[[0,8]])}))),[]),Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)("div",{className:"loc",children:[Object(v.jsxs)("div",{className:"dropdowns",children:[i.length>0&&Object(v.jsxs)(_.a,{children:[Object(v.jsx)(_.a.Toggle,{variant:"success",id:"dropdown-basic",children:n?n.state_name:"Select State"}),Object(v.jsx)(_.a.Menu,{children:i.map((function(e){return Object(v.jsx)(_.a.Item,{onClick:function(){a(e),function(e){se.apply(this,arguments)}(e.state_id)},children:e.state_name})}))})]}),m.length>0&&Object(v.jsxs)(_.a,{children:[Object(v.jsx)(_.a.Toggle,{variant:"success",id:"dropdown-basic",children:C?C.district_name||C.district_name_l:"Select district"}),Object(v.jsx)(_.a.Menu,{children:m.map((function(e){return Object(v.jsx)(_.a.Item,{onClick:function(){S(e)},children:e.district_name||e.district_name_l})}))})]})]}),!!C&&Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(O.a.Group,{controlId:"formBasicEmail",children:[Object(v.jsx)(O.a.Label,{children:"Enter allowed pin codes seperated by commas. For eg. 400081,400070"}),Object(v.jsx)(O.a.Control,{type:"email",placeholder:"",value:M,onChange:function(e){V(e.target.value)}}),Object(v.jsx)(O.a.Text,{className:"text-muted",children:"If left empty, you may get a slot anywhere in the district you have selected"})]}),Object(v.jsx)(E,{setCaptcha:X}),Object(v.jsx)(f.a,{variant:"primary",disabled:L||!C,onClick:function(){P(!0),F(Q,Z.selectedBeneficiaries,re,ae,J)},type:"submit",children:L?z.length===Z.selectedBeneficiaries.length?"Booked":Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)(B.a,{as:"span",animation:"grow",size:"sm",role:"status","aria-hidden":"true"}),te]}):"Book Slots"})]})]}),z.length>0&&Object(v.jsx)("div",{className:"booked-beneficiaries",children:Object(v.jsxs)(T.a,{striped:!0,bordered:!0,hover:!0,variant:"dark",children:[Object(v.jsx)("thead",{children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{children:"#"}),Object(v.jsx)("th",{children:"Beneficiary Name"}),Object(v.jsx)("th",{children:"Hospital"}),Object(v.jsx)("th",{children:"Session"})]})}),Object(v.jsx)("tbody",{children:z.map((function(e,t){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{children:t+1}),Object(v.jsx)("td",{children:e.name}),Object(v.jsx)("td",{children:e.center}),Object(v.jsx)("td",{children:e.slot})]})}))})]})})]})}function U(e){return Object(v.jsx)(x.Provider,{value:e.value,children:e.children})}var G=n(160);function Y(e){var t=Object(c.useContext)(x),n=t.auth,a=t.selectedBeneficiaries,r=Object(c.useState)(""),s=Object(o.a)(r,2),i=s[0],u=s[1],j=Object(c.useState)(!1),h=Object(o.a)(j,2),m=h[0],g=h[1],k=Object(c.useState)(""),y=Object(o.a)(k,2),w=y[0],C=y[1],S=Object(c.useState)(!1),B=Object(o.a)(S,2),T=B[0],_=B[1];function I(){return(I=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_(!0),!i.match("[0-9]{10}")){e.next=11;break}return e.prev=2,e.next=5,b.a.post(p.GENERATE_OTP,{mobile:i,secret:"U2FsdGVkX191jxkObYJ4qgB38NmH2OzVv5KG6zVOw6B/zXwgrpWqvmeA11dOb8DpoV7YFvZC0FSgTgx8f9uXjQ=="});case 5:t=e.sent,g(t.data.txnId),e.next=11;break;case 9:e.prev=9,e.t0=e.catch(2);case 11:_(!1);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}function E(){return(E=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_(!0),!w.match("[0-9]{6}")){e.next=13;break}return e.prev=2,e.next=5,b.a.post(p.LOGIN,{txnId:m,otp:Object(G.SHA256)(w).toString()});case 5:(t=e.sent).data.token?(_(!1),n.setAuthToken(t.data.token)):_(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0),_(!1);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}return Object(c.useEffect)((function(){a.setSelectedBeneficiaries([]),e.setStep(0)}),[]),Object(v.jsx)(v.Fragment,{children:m?Object(v.jsxs)(v.Fragment,{children:[Object(v.jsxs)(O.a.Group,{controlId:"formBasicPassword",children:[Object(v.jsx)(O.a.Label,{children:"Enter OTP"}),Object(v.jsx)(O.a.Control,{type:"password",value:w,onChange:function(e){return C(e.target.value)},placeholder:"Password"})]}),Object(v.jsx)(f.a,{variant:"primary",disabled:T||!w,type:"submit",onClick:function(){return E.apply(this,arguments)},children:"Login"})]}):Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h1",{children:"Login"}),Object(v.jsxs)(O.a.Group,{children:[Object(v.jsx)(O.a.Label,{children:"Enter Phone Number"}),Object(v.jsx)(O.a.Control,{type:"text",value:i,onChange:function(e){return u(e.target.value)},placeholder:"Enter phone number"}),Object(v.jsx)(O.a.Text,{className:"text-muted",children:"We'll never share your number with anyone else."})]}),Object(v.jsx)(f.a,{variant:"primary",disabled:T,type:"submit",onClick:function(){return I.apply(this,arguments)},children:"GET OTP"})]})})}function M(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],a=t[1];return Object(v.jsxs)(g.a,{show:!n,size:"lg",onHide:function(){},children:[Object(v.jsx)(g.a.Header,{children:Object(v.jsx)(g.a.Title,{children:"Please read the terms of use"})}),Object(v.jsxs)(g.a.Body,{children:[Object(v.jsx)("p",{children:"This Application has been developed by the author as a POC. This app in no way is a replacement for COWIN. Any mistake/ issues/ liabilities/ problems/ penalties caused to the users themselves/ to other users of cowin/ to the cowin app team, are agreed upon by the user to be borne by the user themselves. The user thus understands the risks of continuing."}),Object(v.jsx)("p",{children:" If you disagree you may choose to close the app"})]}),Object(v.jsx)(g.a.Footer,{children:Object(v.jsx)(f.a,{variant:"primary",onClick:function(){return a(!0)},children:"I understand, I agree to the terms of use. I would like to use this app."})})]})}var V=function(){var e=Object(c.useState)(null),t=Object(o.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(0),s=Object(o.a)(r,2),u=s[0],l=s[1],d=Object(c.useState)([]),j=Object(o.a)(d,2),b=j[0],h=j[1],p=Object(c.useState)(),O=Object(o.a)(p,2),x=O[0],k=O[1],y=Object(c.useState)(!1),w=Object(o.a)(y,2),C=w[0],S=w[1],B=Object(c.useCallback)((function(e){e.length>0?(l(u+1),h(e)):k("Select Atleast 1 Beneficiary")})),T=[Object(v.jsx)(m,{nextStep:B}),Object(v.jsx)(A,{})];return Object(c.useEffect)((function(){window.chrome&&window.chrome.runtime&&window.chrome.runtime.id&&(S(!0),window.chrome.tabs.query({active:!0,lastFocusedWindow:!0},(function(e){window.chrome.scripting.executeScript({files:["content.js"],target:{tabId:e[0].id}})})),window.chrome.runtime.onMessage.addListener((function(e,t,n){e.data&&a(e.data)})))}),[]),Object(v.jsxs)("div",Object(i.a)(Object(i.a)({className:"App"},C&&{style:{width:"600px",height:"600px"}}),{},{children:[Object(v.jsxs)(U,{value:{auth:{authToken:n,setAuthToken:a},selectedBeneficiaries:{selectedBeneficiaries:b,setSelectedBeneficiaries:h}},children:[Object(v.jsx)("h2",{className:"title",children:"Cowin Booking Helper"}),n?T[u]:Object(v.jsxs)(v.Fragment,{children:[Object(v.jsx)("h5",{children:"Instructions:"}),Object(v.jsxs)("ul",{children:[C&&Object(v.jsx)("li",{children:"Please login to cowin portal and then open this extension"}),Object(v.jsx)("li",{children:"This extension will help you book the slots the moment they're available."}),Object(v.jsx)("li",{children:"Do not close/hide this extension until your slot is booked"})]}),!C&&Object(v.jsx)(Y,{setStep:l})]}),Object(v.jsxs)(g.a,{show:x,onHide:function(){return k(null)},children:[Object(v.jsx)(g.a.Header,{closeButton:!0,children:Object(v.jsx)(g.a.Title,{children:"An error occured"})}),Object(v.jsx)(g.a.Body,{children:x}),Object(v.jsx)(g.a.Footer,{children:Object(v.jsx)(f.a,{variant:"primary",onClick:function(){return k(null)},children:"Close"})})]})]}),Object(v.jsx)(M,{})]}))},W=(n(307),function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,320)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))});s.a.render(Object(v.jsx)(a.a.StrictMode,{children:Object(v.jsx)(V,{})}),document.getElementById("root")),W()}},[[308,1,2]]]);
//# sourceMappingURL=main.f955e4c4.chunk.js.map